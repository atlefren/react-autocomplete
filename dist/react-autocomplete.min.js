/*! react-autocomplete 25.02.2015 */
var Autocomplete=function(){"use strict";var a=React.createClass({displayName:"AutocompleteItem",select:function(a){a.preventDefault(),this.props.selectItem(this.props.item)},onMouseOver:function(){this.props.mouseOver(this.props.item)},render:function(){var a="";return this.props.selected&&(a="selected"),React.createElement("li",null,React.createElement("a",{href:"/#",tabIndex:"-1",onClick:this.select,onMouseOver:this.onMouseOver,className:a},this.props.item[this.props.displayAttribute]))}}),b=React.createClass({displayName:"Autocomplete",getInitialState:function(){return{searchVal:"",results:[],selectedItem:null,selectedIdx:0}},getDefaultProps:function(){return{displayAttribute:"name"}},search:function(){var a=this.refs.value.getDOMNode().value;a!==this.state.searchVal&&""!==a&&(this.setState({searchVal:a}),this.props.autocompleteSearch(_.extend({query:a},this.props.extraParams),this.showResults)),""===a&&this.showResults([]),this.setState({selectedItem:null}),this.setState({searchVal:a})},setValue:function(a){this.setState({searchVal:a})},showResults:function(a){this.setState({results:a,selectedIdx:0})},selectItem:function(a){this.setState({searchVal:a.name}),this.setState({selectedItem:a}),this.props.select(a)},changeSelectedIdx:function(a){var b=this.state.selectedIdx+a;b>=this.state.results.length?b=0:0>b&&(b=this.state.results.length-1),this.setState({selectedIdx:b})},mouseOver:function(a){this.setState({selectedIdx:this.state.results.indexOf(a)})},onKeyDown:function(a){if(13===a.which||9===a.which){var b=this.state.results[this.state.selectedIdx];b&&this.selectItem(b)}else 40===a.which?this.changeSelectedIdx(1):38===a.which&&this.changeSelectedIdx(-1)},render:function(){var b={display:"block"},c=[],d="form-control";return this.state.results.length&&null===this.state.selectedItem?(d+=" active",c=_.map(this.state.results,function(b,c){var d=this.state.selectedIdx===c;return React.createElement(a,{key:b.id,item:b,selected:d,displayAttribute:this.props.displayAttribute,mouseOver:this.mouseOver,selectItem:this.selectItem})},this)):b={display:"none"},React.createElement("div",{className:"dropdown autocomplete"},React.createElement("input",{value:this.state.searchVal,type:"text",placeholder:this.props.placeholder,ref:"value",className:d,onKeyDown:this.onKeyDown,onChange:this.search}),React.createElement("ul",{className:"dropdown-menu autocomplete-results",style:b},c))}});return b}();